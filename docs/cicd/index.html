<!doctype html><html class=has-navbar-fixed-top><head><title>Datapio - Continuous Integration and Deployment</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bulma-timeline@3.0.4/dist/css/bulma-timeline.min.css><link rel=stylesheet href=https://unpkg.com/@coreui/icons/css/all.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css><style type=text/css>html{scroll-behavior:smooth}.sticky{position:sticky;top:3.5em;left:0;right:0;z-index:30}img.figure{display:block;margin:auto}.is-full-height{height:100%}.has-text-white::placeholder{color:#fff;opacity:.5}</style><script src=https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js></script><script src=https://code.jquery.com/jquery-3.5.1.min.js></script><script src=/js/jquery.tagcloud.js></script><script type=application/javascript>$(()=>{const params=new URLSearchParams(window.location.search)
if(params.get('print')){window.print()
window.onafterprint=window.close}})</script><script src=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js></script><script type=text/javascript>$(()=>{tocbot.init({tocSelector:'#toc',contentSelector:'#document',headingSelector:'h1, h2, h3, h4, h5, h6',orderedList:true})})</script></head><body><nav class="navbar is-info is-fixed-top" role=navigation aria-label="main navigation"><div class=navbar-brand><a class=navbar-item href=/><img src=/media/datapio-logo-light.png alt=datapio></a></div><div class=navbar-menu><div class=navbar-start><p class=navbar-item>|</p><a class=navbar-item href=https://datapio.co/news/>News Feed</a>
<a class=navbar-item href=https://comments-for-datapio-co.talkyard.net>Forum</a>
<a class=navbar-item href=https://datapio.co/docs/>Documentation</a>
<a class=navbar-item href=https://datapio.co/about/>About</a></div><div class=navbar-end><form method=get action=https://datapio.co/search/><div class="navbar-item field"><p class="control has-icons-right"><input class="input is-info has-background-info-dark has-text-white" name=search type=search placeholder=Search...>
<span class="icon is-small is-right cil-search"></span></p></div></form><a class=navbar-item href=/tags/><span class="icon cil-tag"></span></a><a class=navbar-item href=https://github.com/datapio/><img src=/media/github-logo.png alt=Github width=24 height=24></a></div></div></nav><main class=main><div class=columns><div class="column is-one-fifth"><aside class="panel is-full-height"><div class="panel-block sticky"><div class="menu ml-3 mr-3 pt-5"><p class="menu-label has-text-centered">Table of Content</p><ol id=toc class=menu-list></ol></div></div></aside></div><div class=column><div class=container><div class=columns><div class="column is-three-quarters"><div class="container pt-5"><h1 class="title has-text-centered">Continuous Integration and Deployment</h1><nav class="breadcrumb is-centered" aria-label=breadcrumbs><ul><li><a href=/><span class="icon cil-home"></span></a></li><li><a href=https://datapio.co/docs/>Documentation</a></li><li><a href=https://datapio.co/docs/cicd/>Continuous Integration and Deployment</a></li></ul></nav><hr></div><div id=document class="content is-medium"><h3 id=overview>Overview</h3><p>Based on <a href=https://tekton.dev>Tekton</a>, <strong>Datapio</strong> provides a CI/CD platform with:</p><ul><li>project management</li><li>webhook generation</li><li>concurrency settings</li><li>resources creation and garbage collection</li><li>history limitation</li><li>pipeline as code support</li></ul><h3 id=setup>Setup</h3><p>Prerequisites:</p><ul><li><a href=https://helm.sh>Helm 3</a></li><li><a href=https://www.rabbitmq.com>RabbitMQ</a></li><li><a href=https://vaultproject.io>Vault</a></li><li><a href=https://tekton.dev>Tekton</a></li></ul><h4 id=get-the-source-code>Get the source code</h4><p>The source code is hosted on <a href=https://github.com/datapio/opencore>Github</a>:</p><pre><code>$ git clone https://github.com/datapio/opencore.git datapio-opencore
$ cd datapio-opencore
</code></pre><h4 id=create-a-dedicated-namespace>Create a dedicated namespace</h4><p>Using your preferred method, create the following namespace:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>---
<span style=color:#66d9ef>apiVersion</span>: v1
<span style=color:#66d9ef>kind</span>: Namespace
<span style=color:#66d9ef>metadata</span>:
  <span style=color:#66d9ef>name</span>: datapio-control-plane
</code></pre></div><h4 id=install-operators>Install operators</h4><p>First, the <strong>PipelineRunServer Operator</strong>:</p><pre><code>$ helm install \
    pipelinerunserver-operator \
    ./charts/pipelinerunserver-operator \
    --namespace datapio-control-plane
</code></pre><table><thead><tr><th>Values</th><th>Description</th></tr></thead><tbody><tr><td><code>replicaCount</code></td><td>Number of replicas in the cluster (only one supported)</td></tr><tr><td><code>operator.image.name</code></td><td>Docker image name for the operator itself</td></tr><tr><td><code>operator.image.tag</code></td><td>Docker image version</td></tr><tr><td><code>operator.image.pullPolicy</code></td><td>Kubernetes Pull Policy for image</td></tr><tr><td><code>archiver.image.name</code></td><td>Docker image name for the archiver</td></tr><tr><td><code>archiver.image.tag</code></td><td>Docker image version</td></tr><tr><td><code>archiver.image.pullPolicy</code></td><td>Kubernetes Pull Policy for image</td></tr><tr><td><code>worker.image.name</code></td><td>Docker image name for the workers</td></tr><tr><td><code>worker.image.tag</code></td><td>Docker image version</td></tr><tr><td><code>worker.image.pullPolicy</code></td><td>Kubernetes Pull Policy for image</td></tr><tr><td><code>rabbitmq.url_secret</code></td><td>Name of Kubernetes Secret containing a key <code>url</code></td></tr><tr><td><code>rabbitmq.admin_secret</code></td><td>Name of Kubernetes Secret containing the keys <code>protocol</code>, <code>host</code>, <code>port</code>, <code>username</code>, <code>password</code>, and <code>vhost</code></td></tr></tbody></table><p><em>See default values <a href=https://github.com/datapio/opencore/blob/feature/refactor/charts/pipelinerunserver-operator/values.yaml>here</a></em></p><p>Then, the <strong>Project Operator</strong>:</p><pre><code>$ helm install \
    datapio-project-operator \
    ./charts/project-operator \
    --namespace datapio-control-plane
</code></pre><table><thead><tr><th>Values</th><th>Description</th></tr></thead><tbody><tr><td><code>replicaCount</code></td><td>Number of replicas in the cluster (only one supported)</td></tr><tr><td><code>operator.image.name</code></td><td>Docker image name for the operator itself</td></tr><tr><td><code>operator.image.tag</code></td><td>Docker image version</td></tr><tr><td><code>operator.image.pullPolicy</code></td><td>Kubernetes Pull Policy for image</td></tr><tr><td><code>tasks.git.image.name</code></td><td>Docker image name for the <em>Tekton</em> <code>Task</code> git cloning your repository</td></tr><tr><td><code>tasks.git.image.tag</code></td><td>Docker image version</td></tr><tr><td><code>tasks.pipelineExec.image.name</code></td><td>Docker image name for the <em>Tekton</em> <code>Task</code> executing your pipeline&rsquo;s code</td></tr><tr><td><code>tasks.pipelineExec.image.tag</code></td><td>Docker image version</td></tr><tr><td><code>tasks.yarn.image.name</code></td><td>Docker image name for for the <em>Tekton</em> <code>Task</code> yarn installing your pipeline&rsquo;s dependencies)</td></tr><tr><td><code>sidecars.docker.image.name</code></td><td>Docker image name for the tasks sidecar container running a Docker server</td></tr><tr><td><code>sidecars.docker.image.tag</code></td><td>Docker image version</td></tr><tr><td><code>vault_secret</code></td><td>Name of Kubernetes Secret containing the keys <code>VAULT_ADDR</code>, <code>VAULT_ROLE</code> and <code>VAULT_K8S_MOUNT_POINT</code></td></tr></tbody></table><p><em>See default values <a href=https://github.com/datapio/opencore/blob/feature/refactor/charts/project-operator/values.yaml>here</a></em></p></div></div><nav class="column is-one-quarter pt-6"><div class=panel><div class=panel-heading><p class=has-text-centered>Manage projects</p></div><div class=panel-block style=margin:auto><div class="content mt-3 mb-3 has-text-centered" style=margin:auto><strong>Datapio</strong> provides a Kubernetes operator for <code>Project</code> resources.
Learn more about what they do and how to use them.</div></div><div class="panel-block card-footer" style=margin-top:auto><a href=https://datapio.co/docs/cicd/manage-projects/ class=card-footer-item><span class="icon cil-book"></span>Read</a>
<a target=_blank href="https://datapio.co/docs/cicd/manage-projects/?print=1" class=card-footer-item><span class="icon cil-print"></span>Print</a></div></div><div class=panel><div class=panel-heading><p class=has-text-centered>Pipeline As Code</p></div><div class=panel-block style=margin:auto><div class="content mt-3 mb-3 has-text-centered" style=margin:auto>Complex pipelines made easy, portable and reusable.
Learn more about the syntax and architecture.</div></div><div class="panel-block card-footer" style=margin-top:auto><a href=https://datapio.co/docs/cicd/pipeline-as-code/ class=card-footer-item><span class="icon cil-book"></span>Read</a>
<a target=_blank href="https://datapio.co/docs/cicd/pipeline-as-code/?print=1" class=card-footer-item><span class="icon cil-print"></span>Print</a></div></div><div class=panel><div class=panel-heading><p class=has-text-centered>Pipeline Scheduling Model</p></div><div class=panel-block style=margin:auto><div class="content mt-3 mb-3 has-text-centered" style=margin:auto>Learn more about how <strong>Datapio</strong> enables concurrency,
archiving and garbage collection for <em>Tekton</em> pipelines</div></div><div class="panel-block card-footer" style=margin-top:auto><a href=https://datapio.co/docs/cicd/pipeline-scheduling-model/ class=card-footer-item><span class="icon cil-book"></span>Read</a>
<a target=_blank href="https://datapio.co/docs/cicd/pipeline-scheduling-model/?print=1" class=card-footer-item><span class="icon cil-print"></span>Print</a></div></div></nav></div></div></div></div></main><footer class="footer mt-6"><div class="content has-text-centered"><p>Documentation content is released under the term of the
<a href=http://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY NC SA 4.0</a>
license.</p></div></footer></body></html>